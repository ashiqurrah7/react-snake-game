import{F as e,R as t,a as l}from"./vendor.d75053e4.js";var o,r;class n{constructor(e){this.val=e,this.next=null}}class c{constructor(e){const t=new n(e);this.head=t,this.tail=t}}function a(e,t){return Math.floor(Math.random()*(t-e+1)+e)}(r=o||(o={})).UP="UP",r.DOWN="DOWN",r.RIGHT="RIGHT",r.LEFT="LEFT";const s=()=>{e.exports.useRef(1e8);const[l,r]=e.exports.useState(u(15)),[s,f]=e.exports.useState(new Set([106])),[E,p]=e.exports.useState(!1),[v,T]=e.exports.useState(new c({row:7,col:0,cell:106})),[x,N]=e.exports.useState(o.RIGHT),[R,S]=e.exports.useState(v.head.val.cell+5),[I,G]=e.exports.useState(0),[H,D]=e.exports.useState(!1);e.exports.useEffect((()=>{window.addEventListener("keydown",(e=>{F(e)}))}),[]),function(t,l){const o=e.exports.useRef();e.exports.useEffect((()=>{o.current=t}),[t]),e.exports.useEffect((()=>{if(null!==l){let e=setInterval((function(){o.current&&o.current()}),l);return()=>clearInterval(e)}}),[l])}((function(){const e={row:v.head.val.row,col:v.head.val.col},t=i(e,x);if(L(t,l))return void P();const o=l[t.row][t.col];if(s.has(o))return void P();const r=new n({row:t.row,col:t.col,cell:o}),c=v.head;v.head=r,c.next=r;const u=new Set(s);u.delete(v.tail.val.cell),u.add(o),null!==v.tail.next?v.tail=v.tail.next:v.tail=v.head;o===R&&(O(u),E&&W(),(e=>{const t=225;let l;for(;l=a(1,t),e.has(l)||R===l;);const o=Math.random()<.2;S(l),p(o),G((e=>e+100))})(u));f(u)}),150);const F=e=>{const t=d(e.key);""!==t&&(console.log(x),N(t))},L=(e,t)=>e.row<0||e.col<0||(e.row>=t.length||e.col>=t[0].length);const O=e=>{const t=h(v.tail,x);if(L(t,l))return;const o=l[t.row][t.col],r=new n({row:t.row,col:t.col,cell:o}),c=v.tail;v.tail=r,v.tail.next=c,e.add(o),f(e)},W=()=>{const e=w(v.tail,x),t=m(e);!function(e){let t=null,l=e;for(;null!==l;){const e=l.next;l.next=t,t=l,l=e}}(v.tail);const l=v.head;v.head=v.tail,v.tail=l,N(t)},P=()=>{D(!0)};return t.createElement("div",null,t.createElement("div",{className:"score"},t.createElement("h1",null,H?"Game Over":`Score: ${I}`)),t.createElement("div",{className:"board"},l.map(((e,l)=>t.createElement("div",{key:l,className:"row"},e.map(((e,l)=>t.createElement("div",{key:l,className:`cell  \n                            ${s.has(e)?"snake-cell":""}  \n                            ${R==e?E?"rev-food-cell":"food-cell":""}\n                            ${x===o.RIGHT?"head-right":x===o.LEFT?"head-left":x===o.UP?"head-up":x===o.DOWN?"head-down":""}`},t.createElement("h1",{className:""+(x===o.RIGHT?"space-right":x===o.LEFT?"space-left":x===o.UP?"space-up":x===o.DOWN?"space-down":"")},v.head.val.cell==e?":":"")))))))),t.createElement("div",{className:"buttons"},t.createElement("button",{onClick:()=>{f(new Set([106])),p(!1),T(new c({row:7,col:0,cell:106})),N(o.RIGHT),S(v.head.val.cell+5),G(0),D(!1)}}," RESTART")))},u=e=>{let t=1;const l=[];for(let o=0;o<e;o++){let o=[];for(let l=0;l<e;l++)o.push(t++);l.push(o)}return l},d=e=>"w"==e||"W"==e?o.UP:"s"==e||"S"==e?o.DOWN:"d"==e||"D"==e?o.RIGHT:"a"==e||"A"==e?o.LEFT:"",i=(e,t)=>t===o.UP?{row:e.row-1,col:e.col}:t===o.DOWN?{row:e.row+1,col:e.col}:t===o.LEFT?{row:e.row,col:e.col-1}:t===o.RIGHT?{row:e.row,col:e.col+1}:{row:e.row,col:e.col},w=(e,t)=>{if(null===e.next)return t;const{row:l,col:r}=e.val,{row:n,col:c}=e.next.val;return l==n&&r+1===c?o.RIGHT:l==n&&r-1===c?o.LEFT:l+1==n&&r===c?o.DOWN:l-1==n&&r-1===c?o.UP:t},h=(e,t)=>{const l=w(e,t),o=m(l);return f(e,o)},f=(e,t)=>{const{row:l,col:r}=e.val;return t===o.UP?{row:l-1,col:r}:t===o.DOWN?{row:l+1,col:r}:t===o.LEFT?{row:l,col:r-1}:t===o.RIGHT?{row:l-1,col:r+1}:{row:l,col:r}},m=e=>e===o.UP?o.DOWN:e===o.DOWN?o.UP:e===o.LEFT?o.RIGHT:e===o.RIGHT?o.LEFT:e;function E(){return e.exports.useState(0),t.createElement("div",{className:"App"},t.createElement(s,null))}l.render(t.createElement(t.StrictMode,null,t.createElement(E,null)),document.getElementById("root"));
