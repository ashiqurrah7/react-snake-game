import{F as e,R as t,a as l}from"./vendor.d75053e4.js";class o{constructor(e){this.val=e,this.next=null}}class r{constructor(e){const t=new o(e);this.head=t,this.tail=t}}var n,c;(c=n||(n={})).UP="UP",c.DOWN="DOWN",c.RIGHT="RIGHT",c.LEFT="LEFT";const a=()=>{const[l,c]=e.exports.useState(s(15)),[a,h]=e.exports.useState(new Set([106])),[f,p]=e.exports.useState(!1),[v,T]=e.exports.useState(new r({row:7,col:0,cell:106})),[x,N]=e.exports.useState(n.RIGHT),[R,S]=e.exports.useState(v.head.val.cell+5),[I,G]=e.exports.useState(0),[H,D]=e.exports.useState(!1);e.exports.useEffect((()=>{window.addEventListener("keydown",(e=>{F(e)}))}),[]),function(t,l){const o=e.exports.useRef();e.exports.useEffect((()=>{o.current=t}),[t]),e.exports.useEffect((()=>{function e(){o.current&&o.current()}if(null!==l){let t=setInterval(e,l);return()=>clearInterval(t)}}),[l])}((function(){const e={row:v.head.val.row,col:v.head.val.col},t=d(e,x);if(L(t,l))return void P();const r=l[t.row][t.col];if(a.has(r))return void P();const n=new o({row:t.row,col:t.col,cell:r}),c=v.head;v.head=n,c.next=n;const s=new Set(a);s.delete(v.tail.val.cell),s.add(r),null!==v.tail.next?v.tail=v.tail.next:v.tail=v.head;r===R&&(O(s),f&&W(),(e=>{const t=225;let l;for(;l=E(1,t),e.has(l)||R===l;);const o=Math.random()<.2;S(l),p(o),G((e=>e+100))})(s));h(s)}),150);const F=e=>{const t=u(e.key);""!==t&&(console.log(x),N(t))},L=(e,t)=>e.row<0||e.col<0||(e.row>=t.length||e.col>=t[0].length);const O=e=>{const t=w(v.tail,x);if(L(t,l))return;const r=l[t.row][t.col],n=new o({row:t.row,col:t.col,cell:r}),c=v.tail;v.tail=n,v.tail.next=c,e.add(r),h(e)},W=()=>{const e=i(v.tail,x),t=m(e);!function(e){let t=null,l=e;for(;null!==l;){const e=l.next;l.next=t,t=l,l=e}}(v.tail);const l=v.head;v.head=v.tail,v.tail=l,N(t)},P=()=>{D(!0)};return t.createElement("div",null,t.createElement("div",{className:"score"},t.createElement("h1",null,H?"Game Over":`Score: ${I}`)),t.createElement("div",{className:"board"},l.map(((e,l)=>t.createElement("div",{key:l,className:"row"},e.map(((e,l)=>t.createElement("div",{key:l,className:`cell  \n                            ${a.has(e)?"snake-cell":""}  \n                            ${R==e?f?"rev-food-cell":"food-cell":""}\n                            ${x===n.RIGHT?"head-right":x===n.LEFT?"head-left":x===n.UP?"head-up":x===n.DOWN?"head-down":""}`},t.createElement("h1",{className:""+(x===n.RIGHT?"space-right":x===n.LEFT?"space-left":x===n.UP?"space-up":x===n.DOWN?"space-down":"")},v.head.val.cell==e?":":"")))))))),t.createElement("div",{className:"buttons"},t.createElement("button",{onClick:()=>{h(new Set([106])),p(!1),T(new r({row:7,col:0,cell:106})),N(n.RIGHT),S(v.head.val.cell+5),G(0),D(!1)}}," RESTART")))},s=e=>{let t=1;const l=[];for(let o=0;o<e;o++){let o=[];for(let l=0;l<e;l++)o.push(t++);l.push(o)}return l},u=e=>"w"==e||"W"==e?n.UP:"s"==e||"S"==e?n.DOWN:"d"==e||"D"==e?n.RIGHT:"a"==e||"A"==e?n.LEFT:"",d=(e,t)=>t===n.UP?{row:e.row-1,col:e.col}:t===n.DOWN?{row:e.row+1,col:e.col}:t===n.LEFT?{row:e.row,col:e.col-1}:t===n.RIGHT?{row:e.row,col:e.col+1}:{row:e.row,col:e.col},i=(e,t)=>{if(null===e.next)return t;const{row:l,col:o}=e.val,{row:r,col:c}=e.next.val;return l==r&&o+1===c?n.RIGHT:l==r&&o-1===c?n.LEFT:l+1==r&&o===c?n.DOWN:l-1==r&&o-1===c?n.UP:t},w=(e,t)=>{const l=i(e,t),o=m(l);return h(e,o)},h=(e,t)=>{const{row:l,col:o}=e.val;return t===n.UP?{row:l-1,col:o}:t===n.DOWN?{row:l+1,col:o}:t===n.LEFT?{row:l,col:o-1}:t===n.RIGHT?{row:l-1,col:o+1}:{row:l,col:o}},m=e=>e===n.UP?n.DOWN:e===n.DOWN?n.UP:e===n.LEFT?n.RIGHT:e===n.RIGHT?n.LEFT:e;function E(e,t){return Math.floor(Math.random()*(t-e+1)+e)}function f(){return e.exports.useState(0),t.createElement("div",{className:"App"},t.createElement(a,null))}l.render(t.createElement(t.StrictMode,null,t.createElement(f,null)),document.getElementById("root"));
